<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_67) on Sun Jul 10 22:26:24 CEST 2016 -->
<title>UserAuthenticator</title>
<meta name="date" content="2016-07-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="UserAuthenticator";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/devtence/will/dev/commons/authenticators/UserAuthenticator.html" target="_top">Frames</a></li>
<li><a href="UserAuthenticator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.devtence.will.dev.commons.authenticators</div>
<h2 title="Class UserAuthenticator" class="title">Class UserAuthenticator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.devtence.will.dev.commons.authenticators.UserAuthenticator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>com.google.api.server.spi.config.Authenticator</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">UserAuthenticator</span>
extends java.lang.Object
implements com.google.api.server.spi.config.Authenticator</pre>
<div class="block">Authenticator class that implements the logic and methods to authenticate and validate Authorization keys and
 Permissions that are received via http headers. Json Web Tokens (JWT) are used for the Auth keys and are generated
 via the Authentication Web Service.

 All the classes that extends from BaseController will use this Authenticator as default unless is explicitly
 changed.

 This class uses AuthorizationCache and ClientsCache to check the permissions and roles of the user or client
 making the call.</div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>2016-03-09</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>plessmann</dd>
<dt><span class="strong">See Also:</span></dt><dd><code>Authenticator</code>, 
<a href="../../../../../../com/devtence/will/dev/commons/caches/AuthorizationCache.html" title="class in com.devtence.will.dev.commons.caches"><code>AuthorizationCache</code></a>, 
<a href="../../../../../../com/devtence/will/dev/commons/caches/ClientsCache.html" title="class in com.devtence.will.dev.commons.caches"><code>ClientsCache</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.util.logging.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/devtence/will/dev/commons/authenticators/UserAuthenticator.html#log">log</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../com/devtence/will/dev/commons/authenticators/UserAuthenticator.html#UserAuthenticator()">UserAuthenticator</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.api.server.spi.auth.common.User</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/devtence/will/dev/commons/authenticators/UserAuthenticator.html#authenticate(javax.servlet.http.HttpServletRequest)">authenticate</a></strong>(javax.servlet.http.HttpServletRequest&nbsp;request)</code>
<div class="block">The JWT must be set as header using the AUTHORIZATION key and the user id must be set as a header using the
 AUTHORIZATION_KEY.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.api.server.spi.auth.common.User</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/devtence/will/dev/commons/authenticators/UserAuthenticator.html#authProduction(java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String)">authProduction</a></strong>(java.lang.String&nbsp;idClient,
              java.lang.String&nbsp;pathTranslated,
              java.lang.String&nbsp;token,
              java.lang.String&nbsp;key)</code>
<div class="block">This method checks that the client and the user has the correct permission to access the route that is being
 called.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>private static final&nbsp;java.util.logging.Logger log</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="UserAuthenticator()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UserAuthenticator</h4>
<pre>public&nbsp;UserAuthenticator()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="authenticate(javax.servlet.http.HttpServletRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticate</h4>
<pre>public&nbsp;com.google.api.server.spi.auth.common.User&nbsp;authenticate(javax.servlet.http.HttpServletRequest&nbsp;request)</pre>
<div class="block">The JWT must be set as header using the AUTHORIZATION key and the user id must be set as a header using the
 AUTHORIZATION_KEY. The AUTHORIZATION_KEY will be used to check the AuthorizationCache and the stored value is
 then compared to the received JWT.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>authenticate</code>&nbsp;in interface&nbsp;<code>com.google.api.server.spi.config.Authenticator</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the full received request</dd>
<dt><span class="strong">Returns:</span></dt><dd>null for an invalid access, an instanced user for allowed access</dd></dl>
</li>
</ul>
<a name="authProduction(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>authProduction</h4>
<pre>public&nbsp;com.google.api.server.spi.auth.common.User&nbsp;authProduction(java.lang.String&nbsp;idClient,
                                                        java.lang.String&nbsp;pathTranslated,
                                                        java.lang.String&nbsp;token,
                                                        java.lang.String&nbsp;key)</pre>
<div class="block">This method checks that the client and the user has the correct permission to access the route that is being
 called. It checks that the client has the right permission and it checks if that permission requires a user,
 if it does, it check that the user role has the permission. After those tests are passed it checks
 for the validity of the JWT.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>idClient</code> - id of the client that generates the call</dd><dd><code>pathTranslated</code> - the route being accessed by the web call</dd><dd><code>token</code> - the JWT that allows access to the platform</dd><dd><code>key</code> - the user id to get the roles of the user and the secret to decrypt the JWT</dd>
<dt><span class="strong">Returns:</span></dt><dd>if the tests passes, an instatianted user. null if the call is illegal or out of time.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/devtence/will/dev/commons/authenticators/UserAuthenticator.html" target="_top">Frames</a></li>
<li><a href="UserAuthenticator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
